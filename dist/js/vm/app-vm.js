function initViewModel(e,i){function n(e,i){this.showInfo=function(e,i){var s;try{var t=e.photos.groups[0].items[0];s=t.prefix+t.width+"x"+t.height+t.suffix}catch(o){s="img/no-img.svg"}app.infoWindow.setContent('<div class="iwindow"><h2 class="iwindow-title">'+e.name+'</h2><img src="'+s+'" class="iwindow-img"></div>'),app.infoWindow.open(app.map,this.markers[i]),window.innerWidth<600&&n.menuOff()},this.filterVenues=function(e,i){this.selected(null),this.filteredVenues.splice(0),this.venues.forEach(function(e,s){e.name.toUpperCase().startsWith(i.target.value.toUpperCase())?(n.filteredVenues.push(e),n.markers[s].setVisible(!0)):n.markers[s].setVisible(!1)});try{app.infoWindow.close()}catch(s){}};var n=this;this.menuOn=ko.observable(null),this.venues=e,this.filteredVenues=ko.observableArray(),e.forEach(function(e){n.filteredVenues.push(e)}),this.markers=i,this.markers.forEach(function(e,i){e.addListener("click",function(e){return function(i){n.selected(e)}}(i))}),this.selected=ko.observable(null).extend({notify:"always"}),this.selected.subscribe(function(e){null!==e&&n.markers[e].setAnimation(null)},null,"beforeChange"),this.selected.subscribe(function(e){null!==e&&(n.showInfo(n.filteredVenues()[e],e),n.markers[e].setAnimation(google.maps.Animation.BOUNCE))})}app.appViewModel=new n(e,i),ko.applyBindings(app.appViewModel)}var app=app||{};
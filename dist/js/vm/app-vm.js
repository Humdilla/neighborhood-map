function initViewModel(e,i){function s(e,i){this.setupMarkers=function(){this.filteredMarkers.forEach(function(e,i){google.maps.event.clearListeners(e,"click"),console.log(i),e.addListener("click",function(e){return function(i){s.selected(e)}}(i))})},this.showInfo=function(e,i){var t;try{var n=e.photos.groups[0].items[0];t=n.prefix+n.width+"x"+n.height+n.suffix}catch(r){t="img/no-img.svg"}app.infoWindow.setContent('<div class="iwindow"><h2 class="iwindow-title">'+e.name+'</h2><img src="'+t+'" class="iwindow-img"></div>'),app.infoWindow.open(app.map,this.filteredMarkers[i]),window.innerWidth<600&&s.menuOff()},this.filterVenues=function(e,i){this.selected(null),this.filteredVenues.splice(0),this.filteredMarkers=[],this.venues.forEach(function(e,t){e.name.toUpperCase().startsWith(i.target.value.toUpperCase())?(s.filteredVenues.push(e),s.filteredMarkers.push(s.markers[t]),s.markers[t].setVisible(!0)):s.markers[t].setVisible(!1)}),this.setupMarkers();try{app.infoWindow.close()}catch(t){}};var s=this;this.menuOn=ko.observable(null),this.venues=e,this.filteredVenues=ko.observableArray(),e.forEach(function(e){s.filteredVenues.push(e)}),this.markers=i,this.filteredMarkers=i,this.setupMarkers(),this.selected=ko.observable(null).extend({notify:"always"}),this.selected.subscribe(function(e){null!==e&&s.filteredMarkers[e].setAnimation(null)},null,"beforeChange"),this.selected.subscribe(function(e){null!==e&&(s.showInfo(s.filteredVenues()[e],e),s.filteredMarkers[e].setAnimation(google.maps.Animation.BOUNCE),console.log(e))})}app.appViewModel=new s(e,i),ko.applyBindings(app.appViewModel)}var app=app||{};